(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6395:function(e,t,a){Promise.resolve().then(a.bind(a,5567))},5567:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return el}});var r=a(7437),s=a(2265),l=a(4938),n=a(4401),o=a(8736),i=a(2048),d=a(8728),c=a(1994),x=a(3335);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.m6)((0,c.W)(t))}let m=[{id:"inicio",label:"Inicio",icon:l.Z},{id:"sensores",label:"Sensores",icon:n.Z},{id:"reportes",label:"Reportes",icon:o.Z},{id:"mapa",label:"Mapa de Luz",icon:i.Z},{id:"configuracion",label:"Configuraci\xf3n",icon:d.Z}];function g(e){let{activeSection:t,onSectionChange:a}=e;return(0,r.jsxs)("div",{className:"w-64 bg-sidebar border-r border-sidebar-border flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-sidebar-border",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-sidebar-foreground",children:"SolarMetrics"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sistema de Control"})]}),(0,r.jsx)("nav",{className:"flex-1 p-4",children:(0,r.jsx)("ul",{className:"space-y-2",children:m.map(e=>{let s=e.icon;return(0,r.jsx)("li",{children:(0,r.jsxs)("button",{onClick:()=>a(e.id),className:u("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors",t===e.id?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground"),children:[(0,r.jsx)(s,{className:"h-5 w-5"}),e.label]})},e.id)})})})]})}var h=a(5929),f=a(2369),b=a(7053);let p=(0,a(535).j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function v(e){let{className:t,variant:a,size:s,asChild:l=!1,...n}=e,o=l?b.g7:"button";return(0,r.jsx)(o,{"data-slot":"button",className:u(p({variant:a,size:s,className:t})),...n})}var j=a(3580);function D(e){let{...t}=e;return(0,r.jsx)(j.fC,{"data-slot":"dropdown-menu",...t})}function N(e){let{...t}=e;return(0,r.jsx)(j.xz,{"data-slot":"dropdown-menu-trigger",...t})}function y(e){let{className:t,sideOffset:a=4,...s}=e;return(0,r.jsx)(j.Uv,{children:(0,r.jsx)(j.VY,{"data-slot":"dropdown-menu-content",sideOffset:a,className:u("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function L(e){let{className:t,inset:a,variant:s="default",...l}=e;return(0,r.jsx)(j.ck,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":s,className:u("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}function w(){return(0,r.jsxs)("header",{className:"h-16 bg-card border-b border-border flex items-center justify-between px-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h.Z,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("h1",{className:"text-lg font-semibold",children:"SolarMetrics"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date().toLocaleString("es-ES")}),(0,r.jsxs)(D,{children:[(0,r.jsx)(N,{asChild:!0,children:(0,r.jsxs)(v,{variant:"ghost",size:"sm",className:"gap-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),"Usuario"]})}),(0,r.jsxs)(y,{align:"end",children:[(0,r.jsx)(L,{children:"Perfil"}),(0,r.jsx)(L,{children:"Configuraci\xf3n"}),(0,r.jsx)(L,{children:"Cerrar Sesi\xf3n"})]})]})]})]})}function R(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:u("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function S(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:u("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function k(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:u("leading-none font-semibold",t),...a})}function C(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:u("px-6",t),...a})}var z=a(5846),_=a(1239),I=a(2208);let Z=[{key:"LDR1",label:"LDR1 (Superior Izq.)",icon:h.Z,color:"text-blue-400",bgColor:"bg-blue-500/20"},{key:"LDR2",label:"LDR2 (Superior Der.)",icon:z.Z,color:"text-yellow-400",bgColor:"bg-yellow-500/20"},{key:"LDR3",label:"LDR3 (Inferior Izq.)",icon:_.Z,color:"text-purple-400",bgColor:"bg-purple-500/20"},{key:"LDR4",label:"LDR4 (Inferior Der.)",icon:I.Z,color:"text-red-400",bgColor:"bg-red-500/20"}];function M(e){let{currentReading:t}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:Z.map((e,a)=>{let s=e.icon,l=t[e.key];return(0,r.jsxs)(R,{className:"bg-neutral-900 border border-neutral-800 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 animate-scale-in group",style:{animationDelay:"".concat(.1*a,"s")},children:[(0,r.jsxs)(S,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[(0,r.jsx)(k,{className:"text-sm font-medium text-gray-300 group-hover:text-gray-100 transition-colors",children:e.label}),(0,r.jsx)("div",{className:"p-2 rounded-lg ".concat(e.bgColor," group-hover:scale-110 transition-transform"),children:(0,r.jsx)(s,{className:"h-5 w-5 ".concat(e.color)})})]}),(0,r.jsxs)(C,{className:"pt-0",children:[(0,r.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-100 tracking-tight",children:l.toLocaleString()}),(0,r.jsx)("div",{className:"text-sm text-gray-400 font-medium",children:"lux"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-2 flex items-center",children:[(0,r.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Lectura actual"]})]})]},e.key)})})}var O=a(7625),V=a(1156),E=a(6940),H=a(7059),K=a(2027),P=a(8155),A=a(3250),W=a(8925);function B(e){let{data:t,dateRange:a,onDateRangeChange:s}=e,l=t.map(e=>({...e,time:new Date(e.fecha).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}));return(0,r.jsxs)(R,{className:"bg-neutral-900 border border-neutral-800 shadow-lg",children:[(0,r.jsxs)(S,{className:"pb-4",children:[(0,r.jsx)(k,{className:"text-xl font-semibold text-gray-100",children:"Lecturas Hist\xf3ricas"}),(0,r.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,r.jsx)("input",{type:"datetime-local",value:a.start,onChange:e=>s({...a,start:e.target.value}),className:"px-3 py-2 border border-neutral-700 rounded-lg text-sm bg-neutral-800 text-gray-100"}),(0,r.jsx)("input",{type:"datetime-local",value:a.end,onChange:e=>s({...a,end:e.target.value}),className:"px-3 py-2 border border-neutral-700 rounded-lg text-sm bg-neutral-800 text-gray-100"})]})]}),(0,r.jsx)(C,{children:(0,r.jsx)(O.h,{width:"100%",height:350,children:(0,r.jsxs)(V.w,{data:l,margin:{top:5,right:30,left:20,bottom:5},children:[(0,r.jsx)(E.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.4}),(0,r.jsx)(H.K,{dataKey:"time",stroke:"#e5e7eb",fontSize:11}),(0,r.jsx)(K.Q,{stroke:"#e5e7eb",fontSize:11}),(0,r.jsx)(P.u,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151"}}),(0,r.jsx)(A.D,{wrapperStyle:{color:"#f9fafb"}}),(0,r.jsx)(W.x,{dataKey:"LDR1",stroke:"#22c55e",strokeWidth:2,dot:!1}),(0,r.jsx)(W.x,{dataKey:"LDR2",stroke:"#3b82f6",strokeWidth:2,dot:!1}),(0,r.jsx)(W.x,{dataKey:"LDR3",stroke:"#eab308",strokeWidth:2,dot:!1}),(0,r.jsx)(W.x,{dataKey:"LDR4",stroke:"#ef4444",strokeWidth:2,dot:!1})]})})})]})}function T(e){let{data:t}=e,a=t.reduce((e,t)=>({LDR1:e.LDR1+t.LDR1,LDR2:e.LDR2+t.LDR2,LDR3:e.LDR3+t.LDR3,LDR4:e.LDR4+t.LDR4}),{LDR1:0,LDR2:0,LDR3:0,LDR4:0});t.length>0&&(a.LDR1/=t.length,a.LDR2/=t.length,a.LDR3/=t.length,a.LDR4/=t.length);let s=Math.max(a.LDR1,a.LDR2,a.LDR3,a.LDR4),l=e=>s<=0||Number.isNaN(s)?0:e/s,n=e=>{let t=l(e);return t>.7?"bg-gradient-to-br from-red-500 to-red-700":t>.4?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-gradient-to-br from-emerald-400 to-emerald-600"},o=e=>Math.max(.4,l(e)),i=e=>{let t=l(e);return t>.7?"shadow-lg shadow-red-500/40":t>.4?"shadow-lg shadow-yellow-500/40":"shadow-lg shadow-emerald-500/40"};return(0,r.jsxs)(R,{className:"bg-neutral-900 border border-neutral-800 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)(S,{className:"pb-4",children:[(0,r.jsxs)(k,{className:"text-xl font-semibold text-gray-100 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-emerald-400 to-red-500 rounded-full animate-pulse"}),"Mapa de Calor - Concentraci\xf3n de Luz"]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Distribuci\xf3n espacial de la intensidad lum\xednica"})]}),(0,r.jsxs)(C,{children:[(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 aspect-square max-w-sm mx-auto",children:["LDR1","LDR2","LDR3","LDR4"].map((e,t)=>{let s=a[e];return(0,r.jsxs)("div",{className:"".concat(n(s)," ").concat(i(s)," rounded-xl p-6 flex flex-col items-center justify-center text-white font-semibold transform hover:scale-105 transition-all duration-300 cursor-pointer"),style:{opacity:o(s)},children:[(0,r.jsx)("div",{className:"text-xs text-gray-100/80 mb-1",children:e}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-50",children:Math.round(s)}),(0,r.jsx)("div",{className:"text-xs text-gray-200 mt-1",children:"lux"})]},t)})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-center gap-6 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-neutral-800",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-br from-emerald-400 to-emerald-600 rounded-full shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-300 font-medium",children:"Baja"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-neutral-800",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-300 font-medium",children:"Media"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full bg-neutral-800",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gradient-to-br from-red-400 to-red-600 rounded-full shadow-sm"}),(0,r.jsx)("span",{className:"text-gray-300 font-medium",children:"Alta"})]})]})]})]})}var q=a(7031),U=a(1676),F=a(407),J=a(8772);function Q(e){let{data:t}=e;if(!t||0===t.length)return(0,r.jsxs)(R,{className:"bg-neutral-900 border border-neutral-800 shadow-lg",children:[(0,r.jsx)(S,{children:(0,r.jsx)(k,{className:"text-xl font-semibold text-gray-100",children:"Promedio por Sensor"})}),(0,r.jsx)(C,{children:(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"No hay datos suficientes para calcular promedios"})})]});let a=t.reduce((e,t)=>{var a,r,s,l;return e.LDR1+=null!==(a=t.LDR1)&&void 0!==a?a:0,e.LDR2+=null!==(r=t.LDR2)&&void 0!==r?r:0,e.LDR3+=null!==(s=t.LDR3)&&void 0!==s?s:0,e.LDR4+=null!==(l=t.LDR4)&&void 0!==l?l:0,e},{LDR1:0,LDR2:0,LDR3:0,LDR4:0}),s={LDR1:Math.round(a.LDR1/t.length),LDR2:Math.round(a.LDR2/t.length),LDR3:Math.round(a.LDR3/t.length),LDR4:Math.round(a.LDR4/t.length)},l=[{sensor:"LDR1",promedio:s.LDR1,fill:"#22c55e"},{sensor:"LDR2",promedio:s.LDR2,fill:"#f59e0b"},{sensor:"LDR3",promedio:s.LDR3,fill:"#3b82f6"},{sensor:"LDR4",promedio:s.LDR4,fill:"#ef4444"}];return(0,r.jsxs)(R,{className:"bg-neutral-900 border border-neutral-800 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)(S,{className:"pb-4",children:[(0,r.jsxs)(k,{className:"text-xl font-semibold text-gray-100 flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{className:"w-1 h-4 bg-green-500 rounded-full"}),(0,r.jsx)("div",{className:"w-1 h-3 bg-yellow-500 rounded-full"}),(0,r.jsx)("div",{className:"w-1 h-5 bg-blue-500 rounded-full"}),(0,r.jsx)("div",{className:"w-1 h-2 bg-red-500 rounded-full"})]}),"Promedio por Sensor"]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Promedios calculados con todas las lecturas disponibles en la base de datos"})]}),(0,r.jsx)(C,{children:(0,r.jsx)(O.h,{width:"100%",height:320,children:(0,r.jsxs)(q.v,{data:l,margin:{top:20,right:30,left:20,bottom:5},children:[(0,r.jsx)(E.q,{strokeDasharray:"3 3",stroke:"#4b5563",opacity:.3}),(0,r.jsx)(H.K,{dataKey:"sensor",stroke:"#d1d5db",fontSize:12,tickLine:!1,axisLine:!1}),(0,r.jsx)(K.Q,{stroke:"#d1d5db",fontSize:11,tickLine:!1,axisLine:!1}),(0,r.jsx)(P.u,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"12px",boxShadow:"0 8px 20px rgba(0,0,0,0.5)"},labelStyle:{color:"#f9fafb",fontWeight:"600"},itemStyle:{color:"#f9fafb"},formatter:e=>["".concat(e," lux"),"Promedio"]}),(0,r.jsxs)(U.$,{dataKey:"promedio",radius:[8,8,0,0],className:"hover:opacity-80 transition-opacity duration-200",children:[l.map((e,t)=>(0,r.jsx)(F.b,{fill:e.fill,className:"drop-shadow-sm"},"cell-".concat(t))),(0,r.jsx)(J.e3,{dataKey:"promedio",position:"top",style:{fill:"#f9fafb",fontSize:12}})]})]})})})]})}var Y=a(1414),G=a(1740);function X(e){let{currentReading:t}=e;return(0,r.jsxs)(R,{className:"bg-neutral-900 border border-neutral-800 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsx)(S,{children:(0,r.jsxs)(k,{className:"text-lg font-semibold text-gray-100 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Posici\xf3n de Servos"]})}),(0,r.jsxs)(C,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(Y.Z,{className:"h-5 w-5 text-blue-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-100",children:"Servo Vertical"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"\xc1ngulo de elevaci\xf3n"})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-100",children:[t.servoV,"\xb0"]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(G.Z,{className:"h-5 w-5 text-yellow-400"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-100",children:"Servo Horizontal"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"\xc1ngulo de azimut"})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-100",children:[t.servoH,"\xb0"]})})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-neutral-700",children:(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["\xdaltima actualizaci\xf3n:"," ",(0,r.jsx)("span",{className:"font-medium text-gray-100",children:new Date(t.fecha).toLocaleString("es-ES")})]})})]})]})}var $=a(2735);function ee(e){let{data:t}=e;return(0,r.jsxs)(v,{onClick:()=>{let e=new Blob([["Fecha,LDR1,LDR2,LDR3,LDR4,ServoV,ServoH",...t.map(e=>[e.fecha,e.LDR1,e.LDR2,e.LDR3,e.LDR4,e.servoV,e.servoH].join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(e),a.download="solar_tracker_data_".concat(new Date().toISOString().slice(0,10),".csv"),a.click()},className:"gap-2",children:[(0,r.jsx)($.Z,{className:"h-4 w-4"}),"Exportar CSV"]})}var et=a(738),ea=a(7292);let er=(0,et.ZF)({apiKey:"AIzaSyCT48Io3ZAB0wAAeQYb7XEi_-9ihV4ZA18",authDomain:"solarmetricslg.firebaseapp.com",databaseURL:"https://solarmetricslg-default-rtdb.firebaseio.com",projectId:"solarmetricslg",storageBucket:"solarmetricslg.firebasestorage.app",messagingSenderId:"406882282505",appId:"1:406882282505:web:861475b3a4b2cabdd81cd8",measurementId:"G-JM99JBFBWJ"}),es=(0,ea.N8)(er);function el(){let[e,t]=(0,s.useState)("inicio"),[a,l]=(0,s.useState)({start:new Date(Date.now()-6048e5).toISOString().slice(0,16),end:new Date().toISOString().slice(0,16)}),{estado:n,historial:o}=function(e){let[t,a]=(0,s.useState)(null),[r,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let t=(0,ea.iH)(es,"proyectos/".concat(e,"/estado")),r=(0,ea.jM)(t,e=>{let t=e.val();t&&a({fecha:new Date().toISOString(),LDR1:t.LDR1||0,LDR2:t.LDR2||0,LDR3:t.LDR3||0,LDR4:t.LDR4||0,servoV:t.servoV||0,servoH:t.servoH||0})}),s=new Date,n=[];for(let e=0;e<7;e++){let t=new Date(s);t.setDate(s.getDate()-e),n.push(t.toISOString().slice(0,10).replace(/-/g,""))}let o=[];return n.forEach(t=>{let a=(0,ea.iH)(es,"proyectos/".concat(e,"/historial/").concat(t)),r=(0,ea.jM)(a,e=>{let a=e.val();if(!a)return;let r=Object.entries(a).map(e=>{let[a,r]=e;return{fecha:function(e,t){let a=e.slice(0,4),r=e.slice(4,6),s=e.slice(6,8),l=t.replace(/_/g,":"),n=new Date("".concat(a,"-").concat(r,"-").concat(s,"T").concat(l,":00Z"));return isNaN(n.getTime())?new Date().toISOString():n.toISOString()}(t,a),LDR1:r.LDR1||0,LDR2:r.LDR2||0,LDR3:r.LDR3||0,LDR4:r.LDR4||0,servoV:r.servoV||0,servoH:r.servoH||0}});l(e=>{let t=new Set(e.map(e=>e.fecha));return[...e,...r.filter(e=>!t.has(e.fecha))].sort((e,t)=>new Date(e.fecha).getTime()-new Date(t.fecha).getTime())})});o.push(()=>(0,ea.S1)(a,"value",r))}),()=>{(0,ea.S1)(t,"value",r),o.forEach(e=>e())}},[e]),{estado:t,historial:r}}("tracksolar_01"),i=o.filter(e=>{let t=new Date(e.fecha),r=new Date(a.start),s=new Date(a.end);return t>=r&&t<=s}),d=n||{fecha:new Date().toISOString(),LDR1:0,LDR2:0,LDR3:0,LDR4:0,servoV:0,servoH:0};return(0,r.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,r.jsx)(g,{activeSection:e,onSectionChange:t}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(w,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto p-8 animate-fade-in",children:"inicio"===e&&(0,r.jsxs)("div",{className:"space-y-8 max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-primary",children:"Panel de Control Solar"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2 text-lg",children:"\xdaltima semana de lecturas"})]}),(0,r.jsx)(ee,{data:i})]}),(0,r.jsx)(M,{currentReading:d}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[(0,r.jsx)(B,{data:i,dateRange:a,onDateRangeChange:l}),(0,r.jsx)(T,{data:[d]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[(0,r.jsx)(Q,{data:o}),(0,r.jsx)(X,{currentReading:d})]})]})})]})]})}}},function(e){e.O(0,[401,10,971,117,744],function(){return e(e.s=6395)}),_N_E=e.O()}]);